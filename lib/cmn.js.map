{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bff940d3cfac375ae7f5","webpack:///./src/all.js","webpack:///./src/background.js","webpack:///./src/qs.js","webpack:///./src/fetch-polyfill.js","webpack:///./src/index.js","webpack:///./~/qs/lib/formats.js","webpack:///./~/qs/lib/utils.js"],"names":["alphaSort","compareInt","compareIntThenLex","calcSalt","deepAccessUsingString","dedupeCaseInsensitive","deepSetUsingString","escapeRegex","findClosestLocale","isObject","mapTruthy","retry","timeout","toTitleCase","wait","pushAlternating","genNonce","a","b","localeCompare","inta","parseInt","intb","isaint","isNaN","isbint","sensitive","len","mozKSaltTable","kSaltString","i","Math","floor","random","length","obj","dotpath","defaultval","keys","split","nested","key","Error","arr","ixlast","reduce","acc","el","ix","el_low","toLowerCase","seen","filtered","hasOwnProperty","push","newval","stack","nesteddotpath","dot","shift","join","toString","text","specials","sRE","RegExp","replace","aLocales","aMatchLocales","bestmatch","bestmatchcount","bestpartcount","locale","lparts","localized","found","fparts","maxmatchcount","min","matchcount","avar","Object","prototype","call","constructor","name","target","mapper","callback","cnt","sec","interval","undefined","Infinity","max","STOP_KEYWORD","FAILED_KEYWORD","retries","err","message","startsWith","substr","console","log","ms","promise","Promise","resolve","reject","setTimeout","then","str","txt","charAt","toUpperCase","aTargetArr","aEntry","l","splice","nonce","possible","getUserPreferredLocales","getClosestAvailableLocale","getSelectedLocale","storageCall","userlocale_preferred","extension","i18n","getUILanguage","userlocale_lesspreferred","extensiona","userlocales","extlocales","available","wanted","map","testkey","errors","msgs","extlocale","res","json","msg","getMessage","_storagecall_pendingset","_storagecall_callid","aArea","aAction","aKeys","aOptions","maxtries","timebetween","core","callid","setkey","trycnt","check","arg1","runtime","lastError","stg","stgeds","toRFC3986","fetch","awaitable","xhr","JSON","parse","responseText","url","XMLHttpRequest","responseType","onload","onerror","onabort","open","send","default","Library","_name"],"mappings":"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SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;ACjBA;;AAEA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,mBAAmB,mBAAmB;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mJAAmJ;AACnJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uBAAuB,gBAAgB;AACvC;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"cmn.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cmn\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cmn\"] = factory();\n\telse\n\t\troot[\"cmn\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bff940d3cfac375ae7f5","export function alphaSort(a, b) {\r\n    return a.localeCompare(b);\r\n}\r\n\r\nexport function compareInt(a, b) {\r\n    // sort asc by integer\r\n    return a - b; // sort asc\r\n}\r\nexport function compareIntThenLex(a, b) {\r\n    // sort ascending by integer, and then lexically\r\n\t// ['1', '10', '2'] ->\r\n\t// ['1', '2', '10']\r\n\r\n    let inta = parseInt(a, 10);\r\n    let intb = parseInt(b, 10);\r\n    let isaint = !isNaN(inta);\r\n    let isbint = !isNaN(intb);\r\n    if (isaint && isbint) {\r\n        return inta - intb; // sort asc\r\n    } else if (isaint && !isbint) {\r\n        return -1; // sort a to lower index then b\r\n    } else if (!isaint && isbint) {\r\n        return 1; // sort b to lower index then a\r\n    } else {\r\n        // neither are int's\r\n        return a.localeCompare(b)\r\n    }\r\n}\r\n\r\nexport function calcSalt({\r\n        sensitive=false, // case sensitive\r\n        len=8 // length of salt\r\n    }) {\r\n\t// salt generator from http://mxr.mozilla.org/mozilla-aurora/source/toolkit/profile/content/createProfileWizard.js?raw=1*/\r\n\r\n\tlet mozKSaltTable = sensitive ? [\r\n\t\t'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n\t\t'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',\r\n        'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N',\r\n\t\t'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\r\n\t\t'1', '2', '3', '4', '5', '6', '7', '8', '9', '0'\r\n\t] : [\r\n\t\t'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n\t\t'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',\r\n\t\t'1', '2', '3', '4', '5', '6', '7', '8', '9', '0'\r\n\t];\r\n\r\n\tlet kSaltString = '';\r\n\tfor (let i = 0; i < len; ++i) {\r\n\t\tkSaltString += mozKSaltTable[Math.floor(Math.random() * mozKSaltTable.length)];\r\n\t}\r\n\treturn kSaltString;\r\n\t// return kSaltString + '.' + aName;\r\n}\r\n\r\nexport function deepAccessUsingString(obj, dotpath, defaultval){\r\n    // defaultval is returned when it is not found, by default, defaultval is undefined, set it to \"THROW\" if you want it to throw\r\n\r\n    // super simple version:\r\n    // const deepAccessUsingString = (obj, dotpath) => dotpath.split('.').reduce((nested, key) => nested[key], obj);\r\n\r\n    let keys = dotpath.split('.');\r\n    let nested = obj;\r\n    for (let key of keys) {\r\n        if (nested && key in nested) nested = nested[key]; // `key in nested` this is point of concern. as `in` works with Array,Set,Map (and i dont know maybe more type) too. i am assuming that nested is always an object\r\n        else\r\n            if (defaultval === 'THROW') throw new Error('deepAccessUsingString: missing \"' + dotpath + '\"');\r\n            else return defaultval;\r\n    }\r\n\r\n    return nested;\r\n}\r\n\r\nexport function dedupeCaseInsensitive(arr) {\r\n  // removes duplicates in array. case insensitively.\r\n  // based on \"Hashtables to the rescue\" - http://stackoverflow.com/a/9229821/1828637\r\n  let ixlast = arr.length - 1;\r\n  return arr.reduce(\r\n    (acc, el, ix) => {\r\n      let el_low = el.toLowerCase();\r\n      let { seen, filtered } = acc;\r\n      if (!seen.hasOwnProperty(el_low)) {\r\n        seen[el_low] = true;\r\n        filtered.push(el);\r\n      }\r\n      return ix === ixlast ? filtered : acc;\r\n    },\r\n    { seen:{}, filtered:[] }\r\n  );\r\n}\r\n\r\nexport function deepSetUsingString(obj, dotpath, newval) {\r\n    // throws if set fails\r\n    // may want to update to - http://stackoverflow.com/a/13719799/1828637\r\n\r\n    var stack = dotpath.split('.');\r\n\r\n    let nesteddotpath = [];\r\n    while(stack.length > 1){\r\n        let dot = stack.shift();\r\n        nesteddotpath.push(dot);\r\n        obj = obj[dot];\r\n        if (!isObject(obj)) throw new Error(`Found non object at dot path level of \"${nesteddotpath.join('.')}\". Instead of object, it is \"${obj.toString()}\". Was trying to set full dotpath of \"${dotpath}\".`);\r\n    }\r\n\r\n    obj[stack.shift()] = newval;\r\n\r\n    // let keys = dotpath.split('.');\r\n    // let nested = obj;\r\n    // let nesteddotpath = [];\r\n    // for (let key of keys) {\r\n    //     if (!isObject(nested)) throw new Error(`Found non object at dot path level of \"${nesteddotpath.join('.')}\". Instead of object, it is \"${nested.toString()}\". Was trying to set full dotpath of \"${dotpath}\".`);\r\n\r\n    //     nesteddotpath.push(key);\r\n    //     nested = nested[key];\r\n    // }\r\n    // nested = newval;\r\n}\r\n\r\nexport function escapeRegex(text) {\r\n    let specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\\\'];\r\n    let sRE = new RegExp('(\\\\' + specials.join('|\\\\') + ')', 'g');\r\n\treturn text.replace(sRE, '\\\\$1');\r\n\t// if (!arguments.callee.sRE) {\r\n\t// \tvar specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\\\'];\r\n\t// \targuments.callee.sRE = new RegExp('(\\\\' + specials.join('|\\\\') + ')', 'g');\r\n\t// }\r\n\t// return text.replace(arguments.callee.sRE, '\\\\$1');\r\n}\r\n\r\n/**\r\n * Selects the closest matching locale from a list of locales.\r\n *\r\n * @param  aLocales\r\n *         An array of available locales\r\n * @param  aMatchLocales\r\n *         An array of prefered locales, ordered by priority. Most wanted first.\r\n *         Locales have to be in lowercase.\r\n * @return the best match for the currently selected locale\r\n *\r\n * Stolen from http://mxr.mozilla.org/mozilla-central/source/toolkit/mozapps/extensions/internal/XPIProvider.jsm\r\n */\r\nexport function findClosestLocale(aLocales, aMatchLocales) {\r\n\r\n  // Holds the best matching localized resource\r\n  let bestmatch = null;\r\n  // The number of locale parts it matched with\r\n  let bestmatchcount = 0;\r\n  // The number of locale parts in the match\r\n  let bestpartcount = 0;\r\n\r\n  for (let locale of aMatchLocales) {\r\n    let lparts = locale.split(/[-_]/);\r\n    for (let localized of aLocales) {\r\n      let found = localized.toLowerCase();\r\n      // Exact match is returned immediately\r\n      if (locale === found)\r\n        return localized;\r\n\r\n      let fparts = found.split(/[-_]/);\r\n      /* If we have found a possible match and this one isn't any longer\r\n         then we dont need to check further. */\r\n      if (bestmatch && fparts.length < bestmatchcount)\r\n        continue;\r\n\r\n      // Count the number of parts that match\r\n      let maxmatchcount = Math.min(fparts.length, lparts.length);\r\n      let matchcount = 0;\r\n      while (matchcount < maxmatchcount &&\r\n             fparts[matchcount] === lparts[matchcount])\r\n        matchcount++;\r\n\r\n      /* If we matched more than the last best match or matched the same and\r\n         this locale is less specific than the last best match. */\r\n      if (matchcount > bestmatchcount ||\r\n         matchcount === bestmatchcount && fparts.length < bestpartcount) {\r\n        bestmatch = localized;\r\n        bestmatchcount = matchcount;\r\n        bestpartcount = fparts.length;\r\n      }\r\n    }\r\n    // If we found a valid match for this locale return it\r\n    if (bestmatch)\r\n      return bestmatch;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function isObject(avar) {\r\n    // cosntructor.name tested for `function Animal(){}; var a = new Animal(); isObject(a);` will return true otherwise as it is [Object object]\r\n    return Object.prototype.toString.call(avar) === '[object Object]' && avar.constructor.name === 'Object';\r\n}\r\n\r\nexport function mapTruthy(target, mapper) {\r\n    // target is array\r\n    // mapper gets same args Array.prototype.map gets, currentValue, index, array\r\n    // if element in array is undefined/null/false/0, it is skipped\r\n    return target.reduce((acc, el, ix) => {\r\n        if (el) acc.push(mapper(el, ix, acc))\r\n        return acc;\r\n    }, []);\r\n}\r\n\r\nexport async function retry(callback, {cnt, sec, interval=1000}={}) {\r\n    if (cnt === undefined && sec === undefined) cnt = 10;\r\n\r\n    // either supply cnt or sec\r\n        // set sec or cnt to 0 if you want to try endlessly\r\n    // if neither supplied default is 10 retries\r\n    // interval is ms, defauls to 1000\r\n\r\n\t// callback should return promise\r\n        // throw new Error('STOP' + message) in order to stop retrying and throw the `message`\r\n        // throw new Error() to just say it failed, it will keep retrying\r\n    // callback gets one arg, which is try number, base 0\r\n\r\n    // promise resolved or rejected with new Error(FAILED_KEYWORD)\r\n\r\n    // set cnt\r\n    if (cnt === 0 || sec === 0) cnt = Infinity;\r\n    else if (sec) cnt = Math.max(Math.floor(sec * 1000 / interval), 1);\r\n\r\n    const STOP_KEYWORD = 'STOP';\r\n    const FAILED_KEYWORD = 'FAIL';\r\n\r\n    let retries = 0;\r\n    while (retries < cnt) {\r\n        try {\r\n            return await callback(retries);\r\n        } catch(err) {\r\n             // STOP_RETRIES short for STOP_RETRIES_AND_THROW\r\n            if (err.message.startsWith(STOP_KEYWORD)) throw new Error(err.message.substr(STOP_KEYWORD.length));\r\n            else if (++retries < cnt) {\r\n                console.log(err.message)\r\n                await wait(interval);\r\n            }\r\n            else throw new Error(FAILED_KEYWORD);\r\n        }\r\n    }\r\n}\r\n\r\n// https://github.com/github/fetch/issues/175#issuecomment-284787564\r\n// timeout a promise\r\nexport function timeout(ms, promise) {\r\n    return new Promise(function(resolve, reject) {\r\n        setTimeout(()=>reject(new Error('TIMEOUT')), ms)\r\n        promise.then(resolve, reject)\r\n    })\r\n}\r\n\r\n// http://stackoverflow.com/q/196972/1828637\r\n// consider not proper casing small words - http://php.net/manual/en/function.ucwords.php#84920 - ['of','a','the','and','an','or','nor','but','is','if','then', 'else','when', 'at','from','by','on','off','for','in','out', 'over','to','into','with'];\r\nexport function toTitleCase(str) {\r\n    return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n}\r\n\r\nexport async function wait(ms) {\r\n    await new Promise(resolve => setTimeout(()=>resolve(), ms));\r\n}\r\n\r\nexport function pushAlternating(aTargetArr, aEntry) {\r\n\t// pushes into an array aEntry, every alternating\r\n\t\t// so if aEntry 0\r\n\t\t\t// [1, 2] becomes [1, 0, 2]\r\n\t\t\t// [1] statys [1]\r\n\t\t\t// [1, 2, 3] becomes [1, 0, 2, 0, 3]\r\n\tlet l = aTargetArr.length;\r\n\tfor (let i=l-1; i>0; i--) {\r\n\t\taTargetArr.splice(i, 0, aEntry);\r\n\t}\r\n\r\n\treturn aTargetArr;\r\n}\r\n\r\nexport function genNonce(length) {\r\n\t// generates a nonce\r\n    let nonce = '';\r\n    const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n    for(let i = 0; i < length; i++) {\r\n        nonce += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return nonce;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/all.js","import fetch from './fetch-polyfill'\r\n\r\nimport { dedupeCaseInsensitive, findClosestLocale, isObject } from './all'\r\n// requires extension-polyfill.js\r\n\r\n//scope: webextension background.js\r\n// collection requirements:\r\n// global `core.stg = {}`\r\n// _locales/[LOCALE_TAG]/ directories\r\n// all.js - findClosestLocale\r\n// messages.json in _locales/** directories\r\n\r\n// REQUIREMENTS:\r\n// all.js - dedupeCaseInsensitive\r\nexport async function getUserPreferredLocales() {\r\n  // returns an array with the locales of the user. first entry is most highly preferred. after that is less\r\n  let userlocale_preferred = extension.i18n.getUILanguage(); // same as `extension.i18n.getMessage('@@ui_locale')`\r\n  let userlocale_lesspreferred = await extensiona('i18n.getAcceptLanguages')();\r\n\r\n  let userlocales = [userlocale_preferred, ...userlocale_lesspreferred];\r\n\r\n  // remove duplicates, case insensitively\r\n  return dedupeCaseInsensitive(userlocales);\r\n}\r\n\r\n// REQUIREMENTS:\r\n// all.js - findClosestLocale\r\nexport async function getClosestAvailableLocale(extlocales) {\r\n    // gets the locale available in my extension, that is closest to the users locale\r\n    // returns null if nothing close\r\n\r\n    // lower case things because thats what findClosestLocale needs\r\n    let userlocales = await getUserPreferredLocales();\r\n\r\n    let available = extlocales;\r\n    let wanted = userlocales.map(el => el.toLowerCase()); // findClosestLocale needs it lower case\r\n\r\n    return findClosestLocale(available, wanted); // returns `null` if not found\r\n}\r\n\r\n// REQUIREMENTS\r\n// messages.json in _locales/** directories\r\nexport async function getSelectedLocale(extlocales, testkey) {\r\n\t// returns the locale in my extension, that is being used by the browser, to display my extension stuff\r\n\t// testkey - string of key common to all messages.json files - will collect this message from each of the extlocales, then see what extension.i18n.getMessage(testkey) is equal to\r\n\t// REQUIRED: pick a `testkey` that has a unique value in each message.json file\r\n\r\n\tlet errors = [];\r\n\tlet msgs = {}; // localized_messages `[messages.json[testkey]]: extlocale`\r\n\tfor (let extlocale of extlocales) {\r\n\t\tconsole.log('going to fetch messages.json for extlocale:', extlocale);\r\n\t\tlet res = await fetch('/_locales/' + extlocale + '/messages.json');\r\n\t\tconsole.log('res:', res);\r\n\t\tlet json = await res.json();\r\n\t\tconsole.log('json:', json);\r\n\t\tlet msg = json[testkey].message;\r\n\t\tconsole.log('msg:', msg);\r\n\r\n\t\tif (msg in msgs) errors.push(`* messages.json for locale \"${extlocale}\" has the same \"message\" as locale ${msgs[msg]} for \\`testkey\\`(\"${testkey}\")`);\r\n\t\telse msgs[msg] = extlocale;\r\n\t}\r\n\r\n\tif (errors.length) throw 'ERROR(getSelectedLocale):\\n' + errors.join('\\n');\r\n\r\n\treturn msgs[extension.i18n.getMessage(testkey)];\r\n}\r\n\r\n// rev3 - not yet comit - https://gist.github.com/Noitidart/bcb964207ac370d3301720f3d5c9eb2b\r\n// REQUIREMENTS:\r\n// global `core.stg = {}`\r\nvar _storagecall_pendingset = {};\r\nvar _storagecall_callid = 1;\r\nexport function storageCall(aArea, aAction, aKeys, aOptions) {\r\n\tif (isObject(aArea)) ({ aArea, aAction, aKeys, aOptions } = aArea);\r\n\t// because storage can fail, i created this, which goes until it doesnt fail\r\n\r\n\t// aAction - string;enum[set,get,clear,remove]\r\n\t// aKeys -\r\n\t\t// if aAction \"clear\" then ignore\r\n\t\t// if aAction \"remove\" then string/string[]\r\n\t\t// if aAction \"get\" then null/string/string[]\r\n\t\t// if aAction \"set\" then object\r\n\t// aOptions - object\r\n\t\t// maxtries - int;default:0 - set to 0 if you want it to try infinitely\r\n\t\t// timebetween - int;default:50 - milliseconds\r\n\t\t// core - reference to core\r\n\r\n\taOptions = aOptions ? aOptions : {};\r\n\tconst maxtries = aOptions.maxtries || 0;\r\n\tconst timebetween = aOptions.timebetween || 50;\r\n\tconst core = aOptions.core;\r\n\r\n\tconst callid = _storagecall_callid++; // the id of this call to `storageCall` // only used for when `aAction` is \"set\"\r\n\r\n\tif (aAction === 'set') {\r\n\t\t// see if still trying to set any of these keys\r\n\t\tfor (var setkey in aKeys) {\r\n\t\t\t_storagecall_pendingset[setkey] = callid;\r\n\t\t}\r\n\t}\r\n\treturn new Promise(function(resolve, reject) {\r\n\t\t// start asnc-proc49399\r\n\t\tvar trycnt = 0;\r\n\r\n\t\tvar call = function() {\r\n\t\t\tswitch (aAction) {\r\n\t\t\t\tcase 'clear':\r\n\t\t\t\t\t\textension(`storage.${aArea}.${aAction}`)(check);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'set':\r\n\t\t\t\t\t\t// special processing\r\n\t\t\t\t\t\t// start - block-link3191\r\n\t\t\t\t\t\t// make sure that each this `callid` is still responsible for setting in `aKeys`\r\n\t\t\t\t\t\tfor (var setkey in aKeys) {\r\n\t\t\t\t\t\t\tif (_storagecall_pendingset[setkey] !== callid) {\r\n\t\t\t\t\t\t\t\tdelete aKeys[setkey];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// end - block-link3191\r\n\t\t\t\t\t\tif (!Object.keys(aKeys).length) resolve(); // no longer responsible, as another call to set - with the keys that this callid was responsible for - has been made, so lets say it succeeded // i `resolve` and not `reject` because, say i was still responsible for one of the keys, when that completes it will `resolve`\r\n\t\t\t\t\t\telse extension(`storage.${aArea}.${aAction}`)(aKeys, check);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\textension(`storage.${aArea}.${aAction}`)(aKeys, check);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar check = function(arg1) {\r\n\t\t\tif (extension.runtime.lastError) {\r\n\t\t\t\tif (!maxtries || trycnt++ < maxtries) setTimeout(call, timebetween);\r\n\t\t\t\telse reject(extension.runtime.lastError); // `maxtries` reached\r\n\t\t\t} else {\r\n\t\t\t\tswitch (aAction) {\r\n\t\t\t\t\tcase 'clear':\r\n\t\t\t\t\tcase 'remove':\r\n\t\t\t\t\t\t\t// callback `check` triggred with no arguments\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'set':\r\n\t\t\t\t\t\t\t// callback `check` triggred with no arguments - BUT special processing\r\n\r\n\t\t\t\t\t\t\t// race condition I THINK - because i think setting storage internals is async - so what if another call came in and did the set while this one was in between `call` and `check`, so meaningi t was processing - and then this finished processing AFTER a new call to `storageCall('', 'set'` happend\r\n\t\t\t\t\t\t\t// copy - block-link3191\r\n\t\t\t\t\t\t\t// make sure that each this `callid` is still responsible for setting in `aKeys`\r\n\t\t\t\t\t\t\tfor (let setkey in aKeys) {\r\n\t\t\t\t\t\t\t\tif (_storagecall_pendingset[setkey] !== callid) {\r\n\t\t\t\t\t\t\t\t\tdelete aKeys[setkey];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// end copy - block-link3191\r\n\r\n\t\t\t\t\t\t\t// remove keys from `_storagecall_pendingset`\r\n\t\t\t\t\t\t\tfor (let setkey in aKeys) {\r\n\t\t\t\t\t\t\t\t// assuming _storagecall_pendingset[setkey] === callid\r\n\t\t\t\t\t\t\t\tdelete _storagecall_pendingset[setkey];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// SPECIAL - udpate core.stg\r\n\t\t\t\t\t\t\tif (isObject(core) && core.stg) {\r\n\t\t\t\t\t\t\t\tfor (let setkey in aKeys) {\r\n\t\t\t\t\t\t\t\t\tif (setkey in core.stg) core.stg[setkey] = aKeys[setkey];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tresolve(aKeys);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'get':\r\n\t\t\t\t\t\t\t// callback `check` triggred with 1 argument\r\n\t\t\t\t\t\t\tvar stgeds = arg1;\r\n\t\t\t\t\t\t\tresolve(stgeds);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresolve(stgeds);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tcall();\r\n\t\t// end asnc-proc49399\r\n\t});\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/background.js","import { encode } from 'qs/lib/utils'\r\nimport { formatters } from 'qs/lib/formats'\r\n\r\nexport function toRFC3986(str) {\r\n\treturn formatters['RFC3986'](encode(str));\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/qs.js","class awaitable {\r\n    constructor(xhr) {\r\n        this.xhr = xhr;\r\n    }\r\n    json() {\r\n        return new Promise(resolve => resolve(JSON.parse(this.xhr.responseText)))\r\n    }\r\n    text() {\r\n        return new Promise(resolve => resolve(this.xhr.responseText))\r\n    }\r\n}\r\nexport default function fetch(url) {\r\n    return new Promise((resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.responseType = 'text';\r\n        xhr.onload = () => {\r\n            // console.log(xhr.responseText);\r\n            resolve(new awaitable(xhr));\r\n        };\r\n        xhr.onerror = () => {\r\n            reject('failed');\r\n        };\r\n        xhr.onabort = () => {\r\n            reject('aborted');\r\n        };\r\n        xhr.open(\"GET\", url);\r\n        xhr.send();\r\n    })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/fetch-polyfill.js","export { default as all } from './all'\nexport { default as dom } from './dom'\nexport { default as background } from './background'\nexport { default as qs } from './qs'\n\nexport default class Library {\n  constructor() {\n    this._name = 'Library';\n  }\n  get name() {\n    return this._name;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nmodule.exports = {\n    'default': 'RFC3986',\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return value;\n        }\n    },\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/qs/lib/formats.js\n// module id = 6\n// module chunks = 0","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nexports.arrayToObject = function (source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nexports.merge = function (target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            if (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = exports.arrayToObject(target, options);\n    }\n\n    if (Array.isArray(target) && Array.isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                if (target[i] && typeof target[i] === 'object') {\n                    target[i] = exports.merge(target[i], item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (Object.prototype.hasOwnProperty.call(acc, key)) {\n            acc[key] = exports.merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nexports.decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nexports.encode = function (str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D || // -\n            c === 0x2E || // .\n            c === 0x5F || // _\n            c === 0x7E || // ~\n            (c >= 0x30 && c <= 0x39) || // 0-9\n            (c >= 0x41 && c <= 0x5A) || // a-z\n            (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)] + hexTable[0x80 | ((c >> 12) & 0x3F)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]; // eslint-disable-line max-len\n    }\n\n    return out;\n};\n\nexports.compact = function (obj, references) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n\n    var refs = references || [];\n    var lookup = refs.indexOf(obj);\n    if (lookup !== -1) {\n        return refs[lookup];\n    }\n\n    refs.push(obj);\n\n    if (Array.isArray(obj)) {\n        var compacted = [];\n\n        for (var i = 0; i < obj.length; ++i) {\n            if (obj[i] && typeof obj[i] === 'object') {\n                compacted.push(exports.compact(obj[i], refs));\n            } else if (typeof obj[i] !== 'undefined') {\n                compacted.push(obj[i]);\n            }\n        }\n\n        return compacted;\n    }\n\n    var keys = Object.keys(obj);\n    keys.forEach(function (key) {\n        obj[key] = exports.compact(obj[key], refs);\n    });\n\n    return obj;\n};\n\nexports.isRegExp = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nexports.isBuffer = function (obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/qs/lib/utils.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}